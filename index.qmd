---
title: "Positron入門!"
subtitle: "Rユーザーのための次世代IDE"
date:
  value: now
  format: "YYYY-MM-DD HH:mm:ss"
author: "寺井雅人（愛知工科大学）"
engine: knitr
format:
  revealjs:
    theme: style.scss
    slide-number: c/t
    background-transition: fade
    center: false
    progress: true
    navigation-mode: linear
    footer: |
      Published: 2026-02-13,
      Last update: {{< meta date >}},
      Time Zone: Asia/Tokyo
    width: 1200
    height: 800
    preview-links: auto
    chalkboard: 
      buttons: false
title-slide-attributes:
  data-background-image: fig/title_image.png
  data-background-size: cover
  data-background-opacity: "0.15"
---

# はじめに{background="#3E8EDE"}

## 自己紹介 
- 寺井雅人（Masato Terai）

    - 熊本出身、名古屋在住

- 大学教員（助教）

    - 外国語習得や言語理解に関する研究

- 北海道は31年の人生で初

::: {.top-right}
![](fig/masa.jpg){width=300px}
:::

## 私とR、Rコミュニティ
- Rユーザー歴8年

    - 半年前、RStudioからPositronへ完全移行

- Rコミュニティ

    - 初参加：Nagoya.R (2018)

    - 初発表：Japan.R (2024)

## 想定している聴衆の方

- Rをメインで使うもしくはR時々Pythonの方

- パッケージ開発というより、データ分析などを主な用途としている方

- Visual Studio Codeより、RStudioに慣れ親しんでいる方

## 今回の内容
- **後で目次を挿入**

- AIアシストやrenv、コマンドラインGitは触れない
    - AIアシストのおすすめ記事：[Positron Assistant: データサイエンティスト向けのAIアシスタント機能](https://zenn.dev/uribo/articles/7dbc83e4bbfcc0)

# Positronとは

- RとPythonを"First-class"言語とするVisual Studio Codeに似ている統合開発環境

    - Posit社（RStudioを開発した）が開発中の**次世代**統合開発環境

  - もう beta 版ではない

  > Stable releases of Positron are now available!  
  > Thank you to all our beta users who have been testing and giving feedback on our prereleases over the last year.
  >
  > — [Positron GitHub Releases[Jul 3, 2025]](https://github.com/posit-dev/positron/releases?page=2)


# RStudioから乗り換えるべき？？

- RStudioが消えるわけではない（開発が止まったりするわけではない）
    
    - Positronよりも、RStudio（10年以上の歴史）の方がより安定したソフトウェア

- R, RStudioにこれから触れる人は、Positronがお勧めらしい

    - 既にRStudioをガンガン使っていて、満足しているならRStudioのままでOK!

# こんな人にお勧めかも（by 公式）
- VS Code を使ってデータ分析（Python や R）をしているが、試しにコードを動かしたり、変数やデータを中身まで確認したり、グラフを操作したり、Shiny・Streamlit・FastAPI のようなデータアプリを作ったりするには、もう少し専用の便利機能がほしい人。

- JupyterLab やオンラインのノートブック環境でデータ分析（Python や R）をしていて、ノートブックは使い続けたいが、もっと高機能で本格的な IDE を使いたい人。

- **RStudio を使っていて、IDE をもっと自分好みにカスタマイズしたり、機能を拡張したりしたい人。**

- Python や R だけでなく、Rust、C++、JavaScript、Lua などの言語も使って日常的にデータ分析やパッケージ開発をしている人。

- データ分析に特化した強力な AI 機能を、モダンで拡張性の高い IDE の中で使いたい人。

# もっと自分好みにカスタマイズしたり、機能を拡張する

- 拡張機能

    - VS Codeのほとんどの拡張機能を使える

- Gitコマンド

    - VS CodeレベルのGUI

- AIアシスト

    - 様々なLLMを選べる

# RStudioとの主な違い
- Rprojがない！

    - フォルダ = プロジェクト

    - 詳しい解説：[The Rproj File](https://positron.posit.co/migrate-rstudio-rproj.html)

- RMarkdown、Quartoの書き出しが可能だが、いわゆる"Knit"ボタンがない

    - qmdファイルの場合、"Preview"や"Render on Save"で書きだす

    - Rmdファイルの場合、"Preview"に、"Render Document With R Markdown"が表示される

# RStudioとの主な違い
- 現時点では、RStudioとは異なり、実行結果は、コンソールペインでしか確認できない

    ```However, we are actively enhancing our Positron-native notebook UI that will provide inline outputs for Python or R sessions.```

- Rがクラッシュしても、Positron自体は生き残ることが多い

- バージョンの切り替えも、コンソールの再起動だけでよい

# AI-Powered Data Science
- Positronは、RStudioに比べ、より多くのAIサポートを受けることができる

    - **Databot**機能など、ノーコードでの分析が可能に

        - [公式Youtube（英語）](https://youtu.be/TrN-FMcOsOA?si=2YYNA2_Lv35QXwyD)

# つまり

- RStudioの機能をそのままに、新たな機能を拡張したわけではない

    - RStudioにしかない機能もあったりする

- RStudio: Rに特化した完成度の高い開発環境

    - RだけならRStudio

- Positron：多言語の将来性のある開発環境

    - R + Python、今後は多言語もならPositron

# 実際に触ってみましょう{background="#3E8EDE"}

# Positronのインストール

- Rのインストールも忘れずに！

    - R バージョン 4.2以上が必要

- それぞれのOSに合うインストーラーを選ぶ

    - [リンク](https://positron.posit.co/install.html)

## レイアウト

![Pic From https://positron.posit.co/](https://positron.posit.co/images/user-interface-for-rstudio-migration.jpeg)

# それぞれの機能
- **Activity Bar**：ファイル、Git、拡張機能、AIアシストなどを表示

- **Primary Side Bar**：Activity Barの詳細。Activity Barで選んだものによって内容が異なる。

- **Editor**：コードを記述する箇所

- **Panel**：コンソール、ターミナルなどが表示される

- **Secondary Side Bar**：変数や、プロットなどが表示される

# RStudioとの比較

::: {layout-ncol="2"}
![Pic From https://docs.posit.co/](https://docs.posit.co/ide/user/ide/guide/ui/images/rstudio-panes-labeled.png){height=450px}

![Pic From https://positron.posit.co/](https://positron.posit.co/images/user-interface-for-rstudio-migration.jpeg){height=450px}
:::

# レイアウトの指定
- Stacked Layout：デフォルト

- Side-By-Side Layout：RStudioにより近い

- Notebook Layout：コメント追加

- Assistant Layout：コメント追加

# コマンドパレット
- VS Codeからの機能

    - キーボードから手を離さずに作業できる

- ショートカット（コマンドモード）

- 大体のキーワードで検索してくれる（= 部分一致）

    - Windows:  [Ctrl] + [Shift] + [P]
    - Mac: [command] + [shift] + [P]

## コマンドパレット
- [?]を入れると様々なコマンドを一覧可能

- おすすめ

    - キーワード検索

        - コマンドパレットで[%]

    - ファイルを開く

        - Windows: [Ctrl] + [P]
        - Mac: [command] + [P]

    - 開いているファイルの特定の行にジャンプ

        - Windows: [Ctrl] + [G]
        - Mac: [command] + [G]

# アピールポイント

# データの確認機能

- データの分布や、欠損値の割合などを確認できる

- 以下のコードをRunして、VARIABLESで確認

```{.r}
dat <- airquality
```

## フィルター機能
- RStudioに比べ、より詳細な設定が可能

    ![](fig/filter.png)

# 作成した図を確認可能

- セッション内で作成した図が表示されており、探しやすい

    - 以下のコードをRunして、PLOTSで確認

```{.r}
dat <- mtcars
plot(dat$mpg)
boxplot(dat$mpg, dat$cyl)
```

# ちなみに、、、

- SESSIONタブで表示されている、VARIABLES、PLOTS、CONSOLEはドラッグ&ドロップで表示の順番を変更できます。

# Git操作
- サイドバーの上から3つ目がGit操作

    - RStudioでは、EnvironmentとGitを同時に開けないので、サイドバーに表示されているのはありがたい

- RStudioに比べ、クリック操作で行えるコマンドがかなり増えた（VS Codeレベルになった）

    - RStudio：Commit、Push、Pull

# GitHub

- 連携のしやすさ：大きな差はない

- 差分の確認はRStudioの方がやや見やすい

# ちなみに
- GitやGitHubをこれから勉強したい方へ

    - [RStudioとGitの連携によるバージョン管理](https://www.jstage.jst.go.jp/article/methodologysig/17/0/17_17.3/_article/-char/ja/)

    - [RStudio ユーザーのための GitHub 入門](https://www.jstage.jst.go.jp/article/methodologysig/18/0/18_18.2/_article/-char/ja/)


## プレビュー機能

- Previewを見ながらqmdやRmdファイルを編集できる

    - RStudioでは、Knit（Render）というステップが必要

![](fig/preview.png)

# ミニマップ機能

- スクロールバーの上で右クリック → [Minimap]をクリック

    - RStudioのOutline機能はないので、その代用として使用

![**左：RStudio、右：Positron**](fig/minimap.png)

# テーマ・フォントの変更
- テーマの変更：左下の⚙をクリック → [Themes] → [Color Theme]

    - RStudioよりも選択肢が少ない

- フォントの大きさの変更：左下の⚙をクリック → [Settings] → [Text Editor] → [Font Size]

# おすすめ拡張機能
- 必要なものは基本的にインストール済

- 「VS Code　おすすめ拡張機能」で検索がおすすめ

    - 大体の拡張機能はPositronにインストール可能

## vscode-pdf
- Positron内でPDFを確認できる

    - Split Editorで並列させると便利

![](fig/vscodepdf.png)

## Rainbow CSV

- CSVファイルの中身を色分けして可読性を上げる

![Pic From Rainbow CSV](https://i.imgur.com/6eJqeUN.png)

## indent-rainbow

- インデントを階層ごとに異なる色でハイライト

    - 背景が黒だと見えずらいので注意

![Pic From indent-rainbow](https://raw.githubusercontent.com/oderwat/vscode-indent-rainbow/master/assets/example.png)


# QuartoとR Markdown{background="#3E8EDE"}

## 概要
- Pandocを基盤にした研究・技術文書作成のための出版システム

- Rに依存しない

    - R -> R Markdown

    - Python -> R Markdown = Rの追加インストール

    - R -> Jupyter = Pythonの追加インストール

    - R & Python -> Quarto

#  {background-image="fig/rmdqmd.png" background-size="600px"  background-repeat="no-repeat"}

## R Markdownとの違い

- 様々なプログラム言語に対応（e.g., R、Python、Julia）

    - QuartoはRStudio外でも使いやすい

- Quartoは単体のツール

    - R Markdownでは、distill -> website、bookdown -> 本, revealjs -> スライド

    - Quartoは以上を一つにまとめている

        - 長期的にパッケージ管理がしやすい


# R Markdownとの違い
- PositronとQuarto、RStudioとR Markdown

    - R MarkdownはRStudio内で完結するのが快適（Pythonが使えないわけではない）
    
    - QuartoはVSコードやJupyter、PositronでもOK!

## R Markdownの今後

- RStudioと同様、今後も生き残るらしいのでご安心を

    - R Markdownに満足しているのであれば、Quartoに変える必要もない

::: {.callout-note}
R Markdown is not going away! 
R Markdown is used extensively and continues to work well. It will continue to be actively supported.
— [FAQ for R Markdown Users](https://quarto.org/docs/faq/rmarkdown.html?utm_source=chatgpt.com#is-r-markdown-going-away-will-my-r-markdown-documents-continue-to-work)
:::

# PositronでQuartoを触ってみましょう

- 左上のNewをクリック -> ［New File...］ -> ［Quarto Document］をクリック

- キーボードから手を放したくないのであれば、

    - [Ctrl] + [P] を押す -> [>]を入力 -> [Create New File...] -> ［New File...］ -> ［Quarto Document］

# R Markdownファイルも開きましょう

- 残念ながら.Rmdファイルのテンプレート選択画面はない

    - RStudioで作成した.Rmdファイルを開きます

## R Markdownとの記法の違い

### YAML：出力形式の指定

::: columns
::: {.column width="50%"}
- Quarto: ```format```
:::

::: {.column width="50%"}
- R Markdown: ```output```
:::
![](fig/yaml.png)
:::

## YAML

- R Markdownに合わせる

    - ```author```と```date```も追加

        - ```date: now```でもよい

``` {.r code-line-numbers="3-5"}
title: "Untitled"
author: "Masato Terai"
date: today          
format: html
```

## コードチャンク

::: columns
::: {.column width="50%"}
- R Markdown：チャンクで指定
```{.markdown code-line-numbers="1"}
``` {.r echo = F, fig.dim = c(10, 4.5)}
library(ggplot2)
ggplot(
    mtcars, 
    aes(hp, mpg)
    ) +
  geom_point()
```
:::
::: {.column width="50%"}
- Quarto：チャンク**内**で指定
```{.r code-line-numbers="1-3"}
#| echo: false
#| fig-width: 10
#| fig-height: 4.5
library(ggplot2)
ggplot(
    mtcars, 
    aes(hp, mpg)
    ) +
  geom_point()
```
:::
:::

# その他

::: {.callout-important}
Quartoでは、R Markdownよりも記法が少し厳しい印象です。

例えば、```echo = F```と書いたり、":" の後に半角スペースを入れないと怒られます。
:::

- 網羅的な記法は公式の資料を参照してください

    - [Markdown Basics](https://quarto.org/docs/authoring/markdown-basics.html)

# HTMLファイルに書き出す

- Quarto：［Preview］もしくは［口 Render on Save］に✔を入れてから保存

    - TERMINALでも可能
    
        - ```quarto preview ファイル名.qmd```
        
        - ```quarto render ファイル名.qmd```

- R Markdown：上記の方法もしくは［Preview］で［Render Document With R Markdown］を選択

- [公式のチートシートはこのリンクから](https://rstudio.github.io/cheatsheets/html/quarto.html)

## ちなみに

::: {.callout-caution}
TERMINALでRenderすることも可能ですが、YAMLでengineを定義していない場合、エラーになる場合があります。

 例えば、Python3がないと、TERMINAL操作ではRenderできません。おそらくデフォルトでJupyter設定になっています。

> Starting python3 kernel...Python Unable to locate an installed version of Python 3. Install Python 3 from https://www.python.org/downloads/

従って、RユーザーはYAMLで以下のようにKnitrを明示しておくといいかもしれません。
```engine: knitr```
:::

# まとめ{background="#3E8EDE"}

## Positronがお勧めな理由

### 1. データ分析のための補助機能

- データの分布を一覧で出せる

- プロットの一覧が見れる

- 手をキーボードから離す頻度が減る

## Positronがお勧めな理由

### 2. Git操作がより簡単に
- Gitが使いやすい。RStudioよりGUI操作の選択肢が多い

- Githubとの連携が楽

## Positronがお勧めな理由

### 3. AIのアシストをより受けられる
- Databot機能などを活用すればほぼノーコードで分析が可能

- 個人情報などの管理などには気を付けて！

## Positronをお勧めしない理由

- RStudioに比べるとまだ不安定

- RStudioに慣れた人は最初戸惑うかも

- R言語だけならRStudioで十分

- 紙媒体の資料はまだない

## Positronに移行しないとだめ！とは思わない

- Positronへ乗り換えた個人的理由として、

    - わさもんだから（熊本弁：新しいもの好き）
    
    - データの外観機能が気に入っている

    - Pythonをもっと習得したいが、言語によってIDEを変えたくないから

# 参考資料
- [【AI全部載せできるRのデータ分析環境はこれ】Positron Assistantの導入ガイド](https://note.com/mitti1210/n/n87a4ff6fc9c3)

- [Positronって実際どうなの？RStudioユーザーがCursorと比較しながら触ってみた](https://note.com/mitti1210/n/nb41e77d49f51)

- [Settings, Keybindings, and Extensions for Positron](https://christophertkenny.com/posts/2024-06-29-positron-settings/#extensions)

- [I'm an R user: Quarto or R Markdown?](https://www.jumpingrivers.com/blog/quarto-rmarkdown-comparison/)

# スライドの最後です{background="#3E8EDE"}